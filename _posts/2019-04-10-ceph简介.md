---
title: ceph简介
date: 2019-04-10
categories:
- Tech
- ceph
tags:
- ceph
- distributed system
- storage
---

> 物当有所用 --- 佚名

# ceph 简介

ceph提供`对象存储`，`块设备`，`文件系统`的功能，  
此为三种使用方式，也是三种接口，  
可称为`对象存储接口`，`块设备接口`，`文件系统接口`  

## ceph组成部分：  
- `存储集群`  
- `对象存储接口`  
- `块设备接口`  
- `文件系统接口`  
- `库`  

关系：`对象存储接口`，`块设备接口`，`文件系统接口`，此三个调用`库`来操作`存储集群`，同时，用户可直接调用`库`来操作`存储集群`。

数据关系：在存储集群中，数据按照对象的形式进行存储，也就是kv方式，每个对象有一个对象名和ID，用于查询和标示此对象。  
各个接口存入的数据都是按照对象进行存储的。  
所以，同一个存储集群可以提供给所有的接口作数据存储。  


所谓对象存储，区别于结构化存储，  
结构化存储的实现形式一般是数据表，比如MySQL，ORACLE等这些结构化数据库的存储方式。  



## 存储集群

组成部分：  
- `对象存储进程`  
- `监控进程`  
- `管理进程`  
- `元数据服务进程`

`对象存储进程`，作用：  
存储数据，数据复制，恢复，重平衡，  
并向`监控进程`和`管理进程`提供信息。

`监控进程`，作用：
维护集群状态图，包括：`对象存储进程`的运行时状态图，`监控进程`的运行时状态图，`管理进程`的运行时状态图，`CRUSH`状态图。  
同时，管理认证，此认证是客户端到存储集群的认证，也就是调用`库`的程序和存储集群的认证。

`管理进程`，作用：  
集群运行时性能度量，维护当前集群状态，包括：存储使用率，性能指标，系统负载。  
同时，也包含一个基于python的模块，用于管理和发布集群信息，主要用于基于Web的dashboard的操作和基于RESTful的手动和自动操作。

`元数据服务进程`，作用：  
存储用于文件系统接口的元信息，  
使得文件系统可用POSIX系统的文件系统的常用命令执行操作，比如`cat`，`find`。

## 接口的使用方式：
对象存储接口，使用方式：  
此为HTTP的RESTful接口，兼容Amazon S3和Swift。  
可参考以上协议执行操作，具体命令可查看官网。  
同时，也支持系统管理的相关操作。  

块设备接口，使用方式：内核模式和库模式  
内核模式：创建一个块设备文件，可将此块设备挂载到内核，常见使用场景：作为OpenStack的启动镜像，保存OpenStack虚拟机的镜像。
不知可否按照普通块设备的使用方式进行操作，比如创建文件系统，操作文件系统。
库模式：可以通过API接口创建一个块设备，然后可以通过API或其它方式来操作块设备。  

术语对照：  
对象存储：Ceph Object Storage   
块设备：Ceph Block Device  
文件系统：Ceph Filesystem  
对象存储接口：Ceph Object Storage Interface   
块设备接口：Ceph Block Device Interface   
文件系统接口：Ceph Filesystem Interface   
存储集群：Ceph Storage Cluster  
对象存储进程：Object Storage Daemon  
监控进程：Monitor Daemon  
管理进程：Manager Daemon  
元信息服务进程：Metadata Server  

---
1，Reference: http://docs.ceph.com/docs/master/


